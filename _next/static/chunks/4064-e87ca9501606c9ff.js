"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{95372:function(e,s,r){var l=r(85893),t=r(86200),a=r(7384),i=r(8371),n=r(45161);r(67294),s.Z=e=>{let{value:s,...r}=e;return(0,l.jsx)(i.Vp,{size:"sm",variant:"solid",background:(0,n.ff)("grey.2","white.3"),w:"max-content",px:1,...r,children:(0,l.jsx)(t.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(a.B,{value:s,visibleDecimals:2,compact:!0})})})}},74666:function(e,s,r){var l=r(85893),t=r(45161),a=r(57747),i=r(96854);r(67294);var n=r(90851);s.Z=e=>{let{title:s,value:r,size:o,infoLabel:d,wfull:c=!1,woContainer:x,fitCon:u=!1}=e,m=(0,t.ff)("grey.7","white.7"),b=(0,t.ff)("#fff","white.1"),h=(0,t.ff)("grey.2","white.4"),p="lg"===o;return(0,l.jsxs)(a.xu,{width:{base:u?"fit-content":"100%",md:c?"100%":"max-content"},bg:x?"none":b,border:x?"none":"1px",borderColor:h,borderRadius:p?12:8,py:{base:2,md:p?4:2},px:{base:p?4:3,md:p?6:3},pe:x?{base:p?4:2,md:p?6:2}:{base:p?6:8,md:8},children:[(0,l.jsx)(n.Z,{textStyle:{base:"sm",md:p?"base":"sm"},mb:{base:0,md:p?1:0},fontWeight:p?500:400,color:m,w:"max-content",title:s,infolabel:d}),(0,l.jsx)(a.xu,{textStyle:{base:"xl",md:p?"3xl":"xl"},fontWeight:p?500:600,children:e.loading?(0,l.jsx)(i.O,{height:"30px",w:"24"}):r})]})}},88862:function(e,s,r){var l=r(85893),t=r(45161),a=r(7384);s.Z=e=>{let{value:s,isBorrowAPY:r,...i}=e,n="";return n=r?"yellow.5":Number(s)>0?"green.11":0>Number(s)?"red.5":(0,t.ff)("grey.8","white.11"),(0,l.jsx)(a.B,{visibleDecimals:2,color:n,value:s,fontWeight:600,...i})}},79446:function(e,s,r){var l=r(27484),t=r.n(l),a=r(67294),i=r(78607),n=r(51244),o=r(45381),d=r(92321);s.Z=()=>{let[e,s]=(0,o.Yh)(e=>[e.getAllMarketAndReserves,e.data]),{isConnected:r,address:l}=(0,d.m)(),{currentChainId:c}=(0,i.f)(),[x,u]=(0,a.useState)([]),m=(0,a.useCallback)(async()=>{if(!l||!r)return;let s=e(),a=t()().unix();u(s.map(e=>({id:1,marketName:e.market.marketTitle,data:(0,n.C8)(e,a),asset:{icon:"zero",title:"Lending / Borrowing",subtitle:"Incentives earned from supplying / borrowing on lending markets."},action:"Claim"})))},[r,l,c]);return(0,a.useEffect)(()=>{0!==s.size&&m().catch(e=>{console.error("Failed to format User Position Market Table Data: ".concat(e.stack))})},[s]),x}},71847:function(e,s,r){var l=r(80854),t=r(67294),a=r(17124),i=r(64163);s.Z=(e,s)=>{let r=e=>e.isWrappedBaseAsset?(0,a.QD)({symbol:s.baseAssetSymbol,underlyingAsset:l.hP.toLowerCase()}):{},{combinedAssets:n}=(0,t.useMemo)(()=>{let s=new Map;return(null==e?void 0:e.userReservesData)&&(e.userReservesData.filter(e=>{let{underlyingBalance:s}=e;return"0"!==s}).map(e=>{let l={...e,...e.reserve,...r(e.reserve)};return s.set(e.underlyingAsset,l),l}),e.userReservesData.reduce((e,l)=>{let{variableBorrows:t,stableBorrows:a,reserve:n}=l,o=t=>{let a={...l,borrowRateMode:t,...n,...r(n)},i=s.get(l.underlyingAsset);s.set(l.underlyingAsset,{...i,...a}),e.push(a)};return"0"!==t&&o(i.tk.Variable),"0"!==a&&o(i.tk.Stable),e},[])),{combinedAssets:Array.from(s.values())}},[e,s]);return{combinedAssets:n}}},19333:function(e,s,r){r.d(s,{Z:function(){return eZ}});var l=r(85893),t=r(1279),a=r(48204),i=r(91516),n=r(18618),o=r(45161),d=r(34292),c=r(14225),x=r(55281),u=r(71293),m=r(93717),b=r(6216),h=r(57747),p=r(96854),j=r(61557),v=r(10991),y=r(99840),g=r(80510),f=r(15115),w=r(7384),k=r(81625),S=r(92321),_=r(11458),D=r(78607),B=r(86200),A=r(67294),C=r(68615),I=r(87040),P=e=>{let{title:s,info:r,data:t,loading:a}=e,i=(0,o.ff)("_Base Tooltip Icon","tooltip-trigger");return(0,l.jsxs)(d.U,{border:"1px",borderColor:(0,o.ff)("#00000010","#FFFFFF10"),bg:(0,o.ff)("white.9","grey.9"),borderRadius:"md",px:2,py:0,gap:1,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,children:s}),a?(0,l.jsx)(p.O,{height:"20px"}):(0,l.jsx)(h.xu,{fontSize:"sm",fontWeight:600,children:t}),r&&(0,l.jsx)(C.Z,{label:r||"info",children:(0,l.jsx)(I.$,{type:"other",cursor:"pointer",alt:"brand-icons",height:4,name:i})})]})},U=r(90851),F=e=>{let{title:s,info:r,data:t,loading:a,onClick:i,hover:n}=e;return(0,l.jsxs)(h.xu,{onClick:i,cursor:n?"pointer":"default",py:2,px:4,borderLeft:"1px",borderColor:(0,o.ff)("#00000010","#FFFFFF10"),children:[(0,l.jsx)(U.Z,{fontSize:"sm",infolabel:r,title:s,opacity:.5}),a?(0,l.jsx)(p.O,{height:"20px"}):(0,l.jsx)(h.xu,{fontSize:"md",children:t})]})},R=r(82730),Z=r(17191),z=r(50151),N=r(22797),E=r(64325),M=r(74574),W=r(82509),Y=r(94160),T=r(7316),O=r(64163),L=r(44394),V=r(82002),K=function(){let{isOpen:e,onOpen:s,onClose:r}=(0,R.q)(),{openEmodeModal:t}=(0,_.vR)(),a=(0,V.x)(),{currentMarket:i}=(0,D.f)(),{data:{user:n,eModes:d}}=(0,T.Z)(),x=0===n.userEmodeCategoryId,u=(0,o.ff)("white","black"),m=(0,o.ff)("black","white");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Z.J,{isOpen:e,onClose:r,placement:"bottom",closeOnBlur:!0,children:[(0,l.jsx)(z.x,{children:(0,l.jsx)(N.r,{id:"collaterization",isChecked:!x,onChange:s})}),(0,l.jsxs)(E.y,{color:m,bg:u,children:[(0,l.jsx)(M.Y,{fontWeight:"bold",border:"0",children:"Efficiency mode (E-mode)"}),(0,l.jsx)(W.b,{fontSize:"sm",fontWeight:500,sx:{textWrap:"wrap"},children:"E-mode increases your LTV for a selected category of assets up to 97%"}),(0,l.jsx)(Y.D,{border:"0",display:"flex",alignItems:"center",justifyContent:"space-between",pb:4,children:x?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.z,{onClick:()=>{t(O._h.ENABLE)},variant:"filled",children:"Enable E-mode"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(L.Z,{variant:"outlined",onClick:()=>{t(O._h.DISABLE)},"data-cy":"emode-disable",tracking_id:"open_e-mode_modal",tracking_params:{chainId:a,marketId:i,placement:"market_user_position_row"},children:"Disable E-Mode"})})})]})]})})},q=r(24209),H=r(88862),J=r(50474),G=r(20020),Q=r(66712),X=r(91170),$=r(1702),ee=r(4040),es=r(80972),er=r(49289),el=r(5674),et=r(2322),ea=r(3528),ei=r(37848),en=r(95372),eo=r(99733),ed=r(11163),ec=r(23694),ex=r(93676),eu=e=>{var s,r,t;let{item:a,marketId:i,apr:n}=e,{openLegacyBorrow:m,openLegacyRepay:b,openLegacySupply:p,openLegacyWithdraw:j,openCollateralChange:v}=(0,_.vR)(),[y]=(0,A.useState)(null),g=(0,ed.useRouter)(),f=(0,V.x)(),{currentMarket:k}=(0,D.f)(),[B,C]=(0,A.useState)(O.tk.Variable),{isConnected:I}=(0,S.m)(),P=!a.isActive||a.isFrozen||0>=Number(a.walletBalance)||!I,F=a.isFrozen||!I,R=!a.isActive||!I,Z=!a.isActive||!I,z=B===O.tk.Stable?null==a?void 0:null===(s=a.reserve)||void 0===s?void 0:s.sIncentivesData:null==a?void 0:null===(r=a.reserve)||void 0===r?void 0:r.vIncentivesData;return(0,l.jsxs)(h.xu,{bg:(0,o.ff)("white.11","grey.11"),border:"1px",borderColor:(0,o.ff)("grey.3","white.5"),borderRadius:8,mb:4,p:4,children:[(0,l.jsxs)(d.U,{justifyContent:"space-between",maxW:"100%",mb:4,children:[(0,l.jsx)(et.Z,{symbol:null==a?void 0:a.reserve.iconSymbol,name:null==a?void 0:a.name,aprData:n}),(0,l.jsxs)(d.U,{borderColor:"white.4",children:[(0,l.jsx)(c.z,{size:{base:"sm",md:"md"},variant:"outline",onClick:()=>{(0,L.k)("go_to_reserve_overview",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),g.push("/reserve-overview?underlyingAsset=".concat(a.underlyingAsset,"&marketName=").concat(k))},children:"Details"}),(0,l.jsxs)(Q.v,{children:[(0,l.jsx)(X.j,{ref:y,size:{base:"sm",md:"md"},as:c.z,children:"Manage"}),(0,l.jsx)($.h,{children:(0,l.jsxs)(ee.q,{zIndex:999,children:[(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_borrow_modal",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),m(a.underlyingAsset)},fontWeight:500,isDisabled:F,children:"Borrow More"}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_repay_modal",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),b(a.underlyingAsset,a.borrowRateMode,a.isFrozen)},fontWeight:500,isDisabled:Z,children:"Repay"}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_supply_modal",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),p(a.underlyingAsset)},fontWeight:500,isDisabled:P,children:"Supply More"}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_withdraw_modal",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),j(a.underlyingAsset)},fontWeight:500,isDisabled:R,children:"Withdraw"})]})})]})]})]}),(0,l.jsx)(er.i,{borderStyle:"dashed",mb:4}),(null==a?void 0:a.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL SUPPLIED"}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(w.B,{value:Number(null==a?void 0:a.underlyingBalance),visibleDecimals:2,compact:!0}),(0,l.jsx)(en.Z,{value:Number((null==a?void 0:a.underlyingBalanceUSD)==="0"?"":null==a?void 0:a.underlyingBalanceUSD)})]})})]}),(a.borrowRateMode===O.tk.Variable?a.variableBorrows:a.stableBorrows)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL BORROWED"}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(w.B,{value:Number(a.borrowRateMode===O.tk.Variable?a.variableBorrows:a.stableBorrows)}),(0,l.jsx)(en.Z,{value:Number(a.borrowRateMode===O.tk.Variable?a.variableBorrowsUSD:a.stableBorrowsUSD)})]})})]}),(null==a?void 0:a.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"COLLATERAL USAGE"}),(0,l.jsxs)(x.K,{children:[(0,l.jsx)(N.r,{id:"collaterization",isChecked:a.usageAsCollateralEnabledOnUser,onChange:()=>{(0,L.k)("open_collateral-usage_modal",{chainId:f,marketId:k,reserve:a.symbol,placement:"market_user_position_card"}),v(a.underlyingAsset)}}),(null==a?void 0:a.isIsolated)&&(0,l.jsx)(ei.Z,{label:(0,l.jsx)(U.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(ea.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"})]})]}),(0,l.jsx)(er.i,{borderStyle:"dashed",mt:4,mb:4}),(0,l.jsxs)(el.M,{columns:2,children:[(0,l.jsxs)(x.K,{alignItems:"flex-start",justifyContent:"flex-start",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"SUPPLY APY"}),(0,l.jsx)(h.xu,{children:(null==a?void 0:a.underlyingBalance)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(ec.Z,{aIncentivesData:null!==(t=a.aIncentivesData)&&void 0!==t?t:[],symbol:a.iconSymbol,supplyApy:a.reserve.supplyAPY}),(0,l.jsx)(eo.Z,{symbol:a.symbol,marketId:i})]})})]}),(0,l.jsxs)(x.K,{alignItems:"flex-end",justifyContent:"flex-end",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"BORROW APY"}),(0,l.jsx)(h.xu,{children:(null==a?void 0:a.variableBorrowsUSD)==="0"&&(a.borrowRateMode===O.tk.Variable?a.variableBorrows:a.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{children:(0,l.jsx)(ex.Z,{aIncentivesData:null!=z?z:[],symbol:a.symbol,borrowApy:a.variableBorrowAPY})}),(0,l.jsx)(eo.Z,{symbol:a.symbol,marketId:i,type:"borrow"})]})})]})]})]})},em=r(64698),eb=r(89993),eh=r(85105),ep=r(86115),ej=r(89555),ev=r(8371),ey=e=>{let{value:s,...r}=e;return(0,l.jsx)(ev.Vp,{size:"sm",variant:"solid",background:(0,o.ff)("grey.2","white.3"),w:"max-content",px:1,...r,children:(0,l.jsx)(w.B,{value:s,visibleDecimals:2,compact:!0})})},eg=r(12505),ef=e=>{var s,r,t;let{item:a,marketId:i,headers:m,apr:b}=e,{openLegacyBorrow:p,openLegacyRepay:j,openLegacySupply:v,openLegacyWithdraw:y,openCollateralChange:f}=(0,_.vR)(),[k]=(0,A.useState)(null),C=(0,ed.useRouter)(),{currentMarket:I}=(0,D.f)(),P=(0,V.x)(),[F,R]=(0,A.useState)(O.tk.Variable),{isConnected:Z}=(0,S.m)(),[z]=(0,n.a)("(max-width: 740px)"),E=!a.isActive||a.isFrozen||0>=Number(a.walletBalance)||!Z,M=a.isFrozen||!Z||a.isIsolated,W=!a.isActive||!Z,Y=!a.isActive||!Z,T=F===O.tk.Stable?null==a?void 0:null===(s=a.reserve)||void 0===s?void 0:s.sIncentivesData:null==a?void 0:null===(r=a.reserve)||void 0===r?void 0:r.vIncentivesData,K=e=>{let s=null==m?void 0:m.find(s=>s.key===e);return null==s?void 0:s.show};return(0,l.jsxs)(g.Tr,{fontWeight:500,children:[K("name")&&(0,l.jsx)(em.Td,{onClick:()=>{(0,L.k)("go_to_reserve_overview",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),C.push("/reserve-overview?underlyingAsset=".concat(a.underlyingAsset,"&marketName=").concat(I))},children:(0,l.jsxs)(h.xu,{display:"flex",children:[(0,l.jsx)(et.Z,{symbol:a.iconSymbol,name:a.name,count:z?8:24,aprData:b}),(0,l.jsx)(eb.h,{"aria-label":"Menu Colapse",icon:(0,l.jsx)(eh.X,{w:4,h:4,color:(0,o.ff)("grey.5","white.7"),ml:1}),variant:"normal",onClick:()=>""})]})}),K("status")&&(0,l.jsx)(em.Td,{children:a.isIsolated?(0,l.jsx)(ei.Z,{label:(0,l.jsx)(U.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(ea.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"}):(0,l.jsx)(ei.Z,{label:(0,l.jsxs)(d.U,{gap:1,children:[(0,l.jsx)(u.x,{children:"Collateral"}),(0,l.jsx)(ep.n,{color:"green.5"})]}),level:"LOW"})}),K("underlyingBalanceUSD")&&(0,l.jsx)(em.Td,{children:(null==a?void 0:a.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:Number((null==a?void 0:a.underlyingBalanceUSD)==="0"?"":null==a?void 0:a.underlyingBalanceUSD),visibleDecimals:2,compact:!0})}),(0,l.jsx)(ey,{value:Number(null==a?void 0:a.underlyingBalance)})]})}),K("variableBorrowsUSD")&&(0,l.jsx)(em.Td,{children:(a.borrowRateMode===O.tk.Variable?a.variableBorrows:a.stableBorrows)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:Number(a.borrowRateMode===O.tk.Variable?a.variableBorrowsUSD:a.stableBorrowsUSD),visibleDecimals:2,compact:!0})}),(0,l.jsx)(ey,{value:Number(a.borrowRateMode===O.tk.Variable?a.variableBorrows:a.stableBorrows)})]})}),K("sumSupplyAPY")&&(0,l.jsx)(em.Td,{children:(null==a?void 0:a.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(ec.Z,{aIncentivesData:null!==(t=a.aIncentivesData)&&void 0!==t?t:[],symbol:a.iconSymbol,supplyApy:a.reserve.supplyAPY}),(0,l.jsx)(eo.Z,{symbol:a.symbol,marketId:i})]})}),K("interestEarned")&&(0,l.jsx)(em.Td,{children:(null==a?void 0:a.interestEarned)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number((null==a?void 0:a.interestEarned)===0?"":null==a?void 0:a.interestEarned),visibleDecimals:2,compact:!0})})})})}),K("sumBorrowAPY")&&(0,l.jsx)(em.Td,{children:(null==a?void 0:a.variableBorrowsUSD)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{children:(0,l.jsx)(ex.Z,{aIncentivesData:null!=T?T:[],symbol:a.symbol,borrowApy:a.variableBorrowAPY})}),(0,l.jsx)(eo.Z,{symbol:a.symbol,marketId:i,type:"borrow"})]})}),K("interestPaid")&&(0,l.jsx)(em.Td,{children:(null==a?void 0:a.interestPaid)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number((null==a?void 0:a.interestPaid)===0?"":-((null==a?void 0:a.interestPaid)*1)),visibleDecimals:2,compact:!0})})})})}),K("usageAsCollateralEnabledOnUser")&&(0,l.jsx)(em.Td,{children:(0,l.jsx)(x.K,{children:(0,l.jsx)(N.r,{id:"collaterization",isChecked:a.usageAsCollateralEnabledOnUser,onChange:()=>{(0,L.k)("open_collateral-usage_modal",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),f(a.underlyingAsset)}})})}),K("action")&&(0,l.jsx)(eg.Z,{sticky:"right",children:(0,l.jsxs)(Q.v,{children:[(0,l.jsx)(X.j,{ref:k,size:{base:"xs",md:"sm"},as:c.z,children:ej.ag._("Manage")}),(0,l.jsx)($.h,{children:(0,l.jsxs)(ee.q,{zIndex:999,children:[(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_borrow_modal",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),p(a.underlyingAsset)},isDisabled:M,children:ej.ag._("Borrow")}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_repay_modal",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),j(a.underlyingAsset,a.borrowRateMode,a.isFrozen)},isDisabled:Y,children:ej.ag._("Repay")}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_supply_modal",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),v(a.underlyingAsset)},isDisabled:E,children:ej.ag._("Supply")}),(0,l.jsx)(es.s,{onClick:()=>{(0,L.k)("open_withdraw_modal",{chainId:P,marketId:I,reserve:a.symbol,placement:"market_user_position_row"}),y(a.underlyingAsset)},isDisabled:W,children:ej.ag._("Withdraw")})]})})]})})]})},ew=r(91489),ek=r(61514),eS=r(78188),e_=r(71847),eD=r(80854),eB=r(91173),eA=r(79446),eC=r(33168),eI=r(5385),eP=r(92406),eU=r(39332),eF=r(14543);let eR=[{key:"name",name:"Asset",defaultShow:!0,show:!0,disable:!0},{key:"status",name:"Status",defaultShow:!1,show:!1,disable:!1},{key:"underlyingBalanceUSD",name:"Supplied",defaultShow:!0,show:!0,disable:!1},{key:"variableBorrowsUSD",name:"Borrowed",defaultShow:!0,show:!0,disable:!1},{key:"sumSupplyAPY",name:"Supply APY",defaultShow:!0,show:!0,disable:!1},{key:"interestEarned",name:"Interest Earned",defaultShow:!0,show:!0,disable:!1},{key:"sumBorrowAPY",name:"Borrow APY",defaultShow:!0,show:!0,disable:!1},{key:"interestPaid",name:"Interest Paid",defaultShow:!0,show:!0,disable:!1},{key:"usageAsCollateralEnabledOnUser",name:"Collateral",defaultShow:!0,show:!0,disable:!1},{key:"action",name:"",defaultShow:!0,show:!0,disable:!1}];var eZ=e=>{let{showNoData:s}=e,{currentMarket:r,currentChainId:C,currentMarketData:I,currentNetworkConfig:U}=(0,D.f)(),R=(0,ek.ZP)(),[Z]=(0,n.a)("(min-width: 500px)"),{openClaimRewards:z,openHFModal:N}=(0,_.vR)(),{isConnected:E}=(0,S.m)(),M=(0,eU.useRouter)(),{address:W}=(0,S.m)(),{walletBalances:Y}=(0,eB.P)(),L=(0,eA.Z)(),{data:{user:V,reserves:Q,loading:X}}=(0,T.Z)(),{combinedAssets:$}=(0,e_.Z)(V,U),ee=I.v3&&Object.keys((0,eC.YN)(Q)).length>1,es=(0,o.ff)("#FFFFFF","black"),er=(0,o.ff)("grey.10","white.10"),el=(0,o.ff)(eF.mH["5"],eF.mH["6"]),et=(0,o.ff)("grey.6","white.7"),ea=(0,o.ff)("grey.10","white.9"),[ei,en]=A.useState(!1),[eo,ed]=A.useState(O.tk.Variable),ec=$.map(e=>{var s,r;return{...e,walletBalance:e.isWrappedBaseAsset?null===(s=Y[eD.hP.toLowerCase()])||void 0===s?void 0:s.amount:null===(r=Y[e.underlyingAsset])||void 0===r?void 0:r.amount}}),ex=L.find(e=>e.marketName===I.marketTitle),em=ex?ex.data.rewardToken:"0",eb=ex?ex.data.rewardUSD:0,eh=(0,A.useMemo)(()=>ec.map(e=>{var s,r,l;let t=eo===O.tk.Stable?null==e?void 0:null===(s=e.reserve)||void 0===s?void 0:s.sIncentivesData:null==e?void 0:null===(r=e.reserve)||void 0===r?void 0:r.vIncentivesData,{incentivesNetAPR:a}=(0,eS.Or)(null!==(l=e.aIncentivesData)&&void 0!==l?l:[],I),{incentivesNetAPR:i}=(0,eS.Or)(null!=t?t:[],I);return{...e,interestEarned:Number(e.underlyingBalanceUSD)*Number(e.supplyAPY),interestPaid:Number(e.variableBorrowsUSD)*Number(e.variableBorrowAPY),sumSupplyAPY:Number(e.reserve.supplyAPY)+Number(a),sumBorrowAPY:-Number(e.variableBorrowAPY)+Number(i)}}),[ec]),[ep,ev]=A.useState(eR),[ey,eg]=A.useState(null),eZ=e=>{var s;let r=null===(s=eR.find(s=>s.key===e))||void 0===s?void 0:s.key;if(r)eg({key:r,direction:ey?"asc"===ey.direction?"desc":"desc"===ey.direction?"neutral":"asc":"asc"})},ez=(0,A.useMemo)(()=>ey&&"neutral"!==ey.direction?(0,k.d)(eh,null==ey?void 0:ey.key,null==ey?void 0:ey.direction):eh,[eh,ey]),eN=(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").plus((null==V?void 0:V.availableBorrowsMarketReferenceCurrency)||"0"),eE=eN.eq(0)?"0":(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").div(eN).toFixed(),eM=(null==V?void 0:V.totalCollateralMarketReferenceCurrency)==="0"?"0":(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").dividedBy((null==V?void 0:V.totalCollateralMarketReferenceCurrency)||"1").toFixed(),eW=()=>ez.reduce((e,s)=>e+(s.interestEarned||0),0),eY=()=>ez.reduce((e,s)=>e+(s.interestPaid||0),0);function eT(e){return(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(F,{title:ej.ag._("Net Worth"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==e?void 0:e.netWorthUSD)||0,visibleDecimals:2})}),loading:X}),(0,l.jsx)(F,{title:ej.ag._("Net APY"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(H.Z,{value:100*e.netAPY||0})}),loading:X}),(0,l.jsx)(F,{title:"Net Interest",data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eW()-eY()),visibleDecimals:2,compact:!0})})}),loading:X}),(0,l.jsx)(F,{title:ej.ag._("Health Factor"),data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(J.Z,{value:null==e?void 0:e.healthFactor}),(0,l.jsx)(c.z,{variant:"outline",size:"xs",onClick:()=>N(e.healthFactor,eM,e.currentLoanToValue,e.currentLiquidationThreshold),children:ej.ag._("Details")})]}),loading:X,hover:!0}),(0,l.jsx)(F,{title:ej.ag._("Available Rewards"),data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:eb||0,visibleDecimals:2})}),eb>0&&(0,l.jsx)(c.z,{variant:"ghost",size:"xs",onClick:()=>z(em,C),children:ej.ag._("Claim")})]}),loading:X})]})}return 0===ez.length&&!X&&s?(0,l.jsxs)(m.k,{bg:el,py:{base:4,md:8},px:{base:4,md:4},flexDir:"column",alignItems:"center",position:"relative",className:"lock-table-bg",children:[(0,l.jsx)(b.E,{height:"100%",position:"absolute",inset:0,src:"/images/Locks-bg.svg"}),(0,l.jsxs)(h.xu,{maxW:"360px",mb:6,textAlign:"center",children:[(0,l.jsx)(u.x,{fontWeight:600,fontSize:"lg",mb:1,color:ea,children:ej.ag._("Supply/Borrow Assets")}),(0,l.jsx)(u.x,{fontSize:"sm",color:et,children:ej.ag._("You can supply assets to the protocol to earn rewards or borrow assets to trade.")})]}),E?(0,l.jsx)(m.k,{gap:2,children:(0,l.jsx)(c.z,{onClick:()=>{M.push("/markets")},size:"sm",children:ej.ag._("View Markets")})}):(0,l.jsx)(eP.Z,{})]}):void 0===W||0===W.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:X||0!==ec.length?(0,l.jsx)(eI.Z,{color:er,title:ej.ag._("User Positions"),dontShowByDefault:!1,rightComponent:0===ec.length?(0,l.jsx)(p.O,{width:100,height:7}):(0,l.jsx)(q.Z,{data:ep,onUpdate:e=>{ev(e),localStorage.setItem("marketUserPositionHeaderKeys",JSON.stringify(e))}}),children:(0,l.jsx)(h.xu,{mb:4,children:X?(0,l.jsx)(G.Z,{}):(0,l.jsxs)(h.xu,{children:[(0,l.jsxs)(h.xu,{bg:(0,o.ff)("#FFFFFF","transparent"),border:"1px",overflow:"hidden",borderRadius:"12px",borderBottom:ei?0:"1px",borderBottomRadius:ei?0:"12px",pb:ei?3:0,mb:ei?-3:0,borderColor:(0,o.ff)("grey.3","white.5"),children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(d.U,{flex:1,alignItems:"center",justifyContent:"left",children:(0,l.jsx)(u.x,{fontSize:"md",opacity:.5,color:er,pl:4,children:ej.ag._("Your Position")})}),(0,l.jsxs)(d.U,{children:[Z&&eT(V),(0,l.jsx)(d.U,{px:4,py:5,bg:"white.3",height:"100%",onClick:()=>en(!ei),cursor:"pointer",children:ei?(0,l.jsx)(i.g,{fontSize:24}):(0,l.jsx)(a.v,{fontSize:24})})]})]}),!Z&&ei&&eT(V),ei&&(0,l.jsxs)(d.U,{borderTop:"1px",borderTopColor:(0,o.ff)("#00000010","#FFFFFF10"),flexDir:{base:"column",md:"row"},gap:{base:0,md:1},alignItems:{base:"flex-start",md:"center"},children:[(0,l.jsxs)(x.K,{gap:0,flex:{base:1,md:.5},p:3,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,color:er,pl:1,mb:1,children:ej.ag._("Supply data")}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(P,{title:"".concat(ej.ag._("Balance"),":"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalLiquidityUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("APY")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.earnedAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("Collateral")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalCollateralUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("Interest:")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eW()),visibleDecimals:2,compact:!0})})})})]})]}),(0,l.jsxs)(x.K,{gap:0,borderLeft:{base:0,md:"1px"},borderTop:{base:"1px",md:"0"},flex:{base:1,md:.5},borderColor:"#FFFFFF10 !important",p:3,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,color:er,pl:1,mb:1,children:ej.ag._("Borrow data")}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(P,{title:"".concat(ej.ag._("Balance")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalBorrowsUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("APY:")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.debtAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("Power Used:")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:eE||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ej.ag._("Interest:")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eY()),visibleDecimals:2,compact:!0})})})}),ee&&(0,l.jsx)(P,{title:"".concat(ej.ag._("E-Mode:")," :"),data:(0,l.jsx)(K,{})})]})]})]})]}),ei&&Z&&(0,l.jsx)(j.x,{mx:"auto",sx:{border:"1px",borderRadius:"12px",borderColor:(0,o.ff)("grey.3","white.5"),bgColor:(0,o.ff)("#FFFFFF","transparent"),padding:"0px",margin:"0px"},w:"100%",children:(0,l.jsxs)(v.i,{variant:"unstyled",bg:es,border:"none",children:[(0,l.jsx)(y.h,{children:(0,l.jsx)(g.Tr,{children:eR.map((e,s)=>(0,l.jsx)(ew.Z,{sticky:(null==eR?void 0:eR.length)-1===s?"right":void 0,onClick:()=>eZ(e.key),sortDirection:(null==ey?void 0:ey.key)===e.key?null==ey?void 0:ey.direction:void 0,show:e.show,children:(0,l.jsx)(u.x,{children:ej.ag._(e.name)})},e.key))})}),(0,l.jsx)(f.p,{children:null==ez?void 0:ez.map((e,s)=>(0,l.jsx)(ef,{item:e,marketId:r,headers:ep,apr:R},s))})]})}),!Z&&(0,l.jsx)(h.xu,{mt:ei?0:4,children:ez.map((e,s)=>(0,l.jsx)(eu,{item:e,marketId:r,apr:R},s))})]})})}):null})}}}]);